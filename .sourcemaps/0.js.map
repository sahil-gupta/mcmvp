{"version":3,"sources":["../../src/pages/welcome/welcome.module.ts","../../src/pages/welcome/welcome.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { WelcomePage } from './welcome';\n\n@NgModule({\n  declarations: [\n    WelcomePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(WelcomePage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    WelcomePage\n  ]\n})\nexport class WelcomePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/welcome/welcome.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, ToastController } from 'ionic-angular';\n\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport * as firebase from 'firebase/app';\nimport { Platform } from 'ionic-angular';\nimport { Facebook } from '@ionic-native/facebook';\n\nimport { MainPage } from '../pages';\n\n/**\n * The Welcome Page is a splash page that quickly describes the app,\n * and then directs the user to create an account or log in.\n * If you'd like to immediately put the user onto a login/signup page,\n * we recommend not using the Welcome page.\n*/\n@IonicPage()\n@Component({\n  selector: 'page-welcome',\n  templateUrl: 'welcome.html'\n})\nexport class WelcomePage {\n  // userProfile: any = null;\n\n  constructor(public navCtrl: NavController,\n              private afAuth: AngularFireAuth,\n              private fb: Facebook,\n              private platform: Platform,\n              public toastCtrl: ToastController) {\n    // afAuth.authState.subscribe((user: firebase.User) => {\n    //   if (!user) {\n    //     this.userProfile = null;\n    //     return;\n    //   }\n    //   this.userProfile = user;\n    // });\n  }\n\n  // guide https://github.com/angular/angularfire2/blob/master/docs/ionic/v3.md\n  signInWithFacebook() {\n    if (this.platform.is('cordova')) {\n      return this.fb.login(['email', 'public_profile'])\n      .then(res => {\n        const facebookCredential = firebase.auth.FacebookAuthProvider.credential(res.authResponse.accessToken);\n        return firebase.auth().signInWithCredential(facebookCredential)\n        .then(success => this.facebookSuccessTodo(success))\n        .catch(error => {\n          // 'auth/account-exists-with-different-credential'\n          console.log(JSON.stringify(error));\n\n          let toast = this.toastCtrl.create({\n            message: 'So... this email exists with another account',\n            duration: 3000,\n          });\n          toast.present();\n        });\n      })\n      .catch(error => {\n        console.log('cancelled fb login');\n        console.log(JSON.stringify(error));\n      });\n    } else {\n      return this.afAuth.auth.signInWithPopup(new firebase.auth.FacebookAuthProvider())\n      .then(success => this.facebookSuccessTodo(success))\n      .catch(error => {\n        // 'auth/account-exists-with-different-credential'\n        console.log(error.code);\n\n        let toast = this.toastCtrl.create({\n          message: 'So... this email exists with another account',\n          duration: 3000,\n        });\n        toast.present();\n      });\n    }\n  }\n\n  facebookSuccessTodo(success) {\n    console.log(\"facebook success\") // + JSON.stringify(success));\n    var uid;\n    if (success.user) { // first time login\n      uid = success.user.uid;\n      var p = success.additionalUserInfo.profile;\n      firebase.database().ref('users/' + uid).set({\n        gender: p.gender,\n        timezone: p.timezone,\n        link: p.link,\n        last_name: p.last_name,\n        first_name: p.first_name,\n        photoURL: p.photoURL\n      });\n    } else { // repeat login\n      uid = success.uid;\n      firebase.database().ref('users/' + uid).update({\n        last_name: success.displayName.split(' ')[1],\n        first_name: success.displayName.split(' ')[0],\n        photoURL: success.photoURL\n      });\n    }\n\n    this.navCtrl.push(MainPage);\n  }\n\n  tosignup() {\n    this.navCtrl.push('SignupPage');\n  }\n\n  quickload() {\n    this.navCtrl.push(MainPage);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/welcome/welcome.ts"],"sourceRoot":""}
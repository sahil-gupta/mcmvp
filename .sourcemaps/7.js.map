{"version":3,"sources":["../../src/pages/org-donate/org-donate.module.ts","../../src/pages/org-donate/org-donate.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { OrgDonatePage } from './org-donate';\n\n@NgModule({\n  declarations: [\n    OrgDonatePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrgDonatePage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    OrgDonatePage\n  ]\n})\nexport class OrgDonatePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/org-donate/org-donate.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\nimport { InAppBrowser } from '@ionic-native/in-app-browser';\n\nimport { AlertController } from 'ionic-angular';\n\nimport * as firebase from 'firebase/app';\n\n@IonicPage()\n@Component({\n  selector: 'page-org-donate',\n  templateUrl: 'org-donate.html'\n})\nexport class OrgDonatePage {\n  blockorgs = [];\n  theuser;\n  choiceName;\n\n  theamounts;\n  choiceAmount;\n\n  thepayments;\n  choicePayment;\n\n  constructor(public navCtrl: NavController,\n    navParams: NavParams,\n    private iab: InAppBrowser,\n    public alertCtrl: AlertController) {\n    this.blockorgs = navParams.get('blockorgs') || [];\n    // console.log(this.blockorgs)\n    this.theuser = navParams.get('theuser') || {};\n    this.choiceName = 'nameFirst'; // the key on 'theuser'\n\n    this.theamounts = [100, 20, 10];\n    this.choiceAmount = 1; // the index on 'theamounts'\n\n    this.thepayments = ['Paypal', 'Venmo', 'Bitcoin'];\n    this.choicePayment = 1; // the index on 'thepayments'. careful that the input turns it to string\n  }\n\n  openWebsite(website) {\n    // const browser =\n    this.iab.create(website, '_blank', 'location=no');\n  }\n\n  addBlockNow() {\n    var uid = this.theuser['uid'];\n    var amount = this.theamounts[this.choiceAmount];\n    var payment = parseInt(this.choicePayment);\n    var myname = this.theuser[this.choiceName];\n    var d = new Date();\n    var themonth = this.getMonth(d);\n\n    var thedatastring = '// ' + themonth;\n\n    var orgstring = '';\n    var temp1 = this.blockorgs.map(o => o['PPname']);\n    var temp2 = this.blockorgs.map(o => o['percentage']);\n    if (this.blockorgs.length === 1)\n      orgstring = temp1[0];\n    else\n      orgstring = temp1.join(', ') + ' // ' + temp2.join(', ');\n\n    thedatastring += ' // ' + orgstring;\n    var thedatastringWithName = '// ' + myname + ' ' + thedatastring;\n\n    console.log(thedatastring);\n    console.log(thedatastringWithName);\n\n    ////////////////\n\n    var url;\n    if (payment === 0) {\n      url = 'https://www.paypal.me/microchangeIO/'\n      this.openWebsite(url + amount);\n    } else if (payment === 1) {\n      url = 'https://venmo.com/microChange?txn=pay';\n      url += '&amount=' + amount;\n      url += '&note=' + thedatastring;\n      this.openWebsite(url);\n    } else if (payment === 2) {\n      this.presentAlertWhoops();\n      return;\n    }\n\n    // back end block management. happens in parallel\n    firebase.database().ref('globals/lastblock').once('value', snapshot => {\n      var lastblock = snapshot.val();\n\n      this.presentAlert(lastblock+1);\n\n      // create the new block\n      firebase.database().ref('blocks/' + (lastblock+1)).set({\n        data: thedatastringWithName,\n        hash: 'hashSHA256goeshere',\n        previousHash: 'hashSHA256goeshere',\n        index: (lastblock+1),\n        timestamp: d.getTime()\n      });\n\n      // update /lastblock\n      firebase.database().ref('globals/lastblock').set(lastblock+1);\n\n      // add block to usersblocks table\n      firebase.database().ref('usersblocks').push({\n        uid: uid,\n        blockindex: (lastblock+1)\n      });\n    });\n  }\n\n  calcSum() {\n    var sum = 0;\n    for (var i in this.blockorgs) {\n      sum += this.blockorgs[i].percentage;\n    }\n    return sum;\n  }\n\n  presentAlert(n) {\n    // var height = n+1; // because not zero indexed. can later tell donors how high blockchain is.\n\n    const alert = this.alertCtrl.create({\n      title: 'Thanks',\n      message: \"<p>We got your donation. We're sending it to your charities now.</p><p>:)</p>\",\n      buttons: [{\n          text: 'Got it',\n          handler: () => {\n            const navTransition = alert.dismiss();\n            navTransition.then(() => {\n              setTimeout(() => this.navCtrl.pop()); // return to portfolio page\n            });\n            return false;\n          }\n        }]\n    });\n\n    alert.present();\n  }\n\n  presentAlertWhoops() {\n    const alert = this.alertCtrl.create({\n      title: 'Almost there',\n      subTitle: \"We're working on bitcoin donations now. We'll keep you posted.\",\n      buttons: ['Got it']\n    });\n    alert.present();\n  }\n\n\n  getMonth(date) {\n    var month = ['January', 'February', 'March', 'April', 'May', 'June',\n                  'July', 'August', 'September', 'October', 'November', 'December'];\n    return month[date.getMonth()];\n  }\n\n  // simpleHash(s) {\n  //   var hash = 0, i, chr;\n  //   if (s.length === 0) return hash;\n  //   for (i = 0; i < s.length; i++) {\n  //     chr   = s.charCodeAt(i);\n  //     hash  = ((hash << 5) - hash) + chr;\n  //     hash |= 0; // Convert to 32bit integer\n  //   }\n  //   return hash;\n  // }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/org-donate/org-donate.ts"],"sourceRoot":""}